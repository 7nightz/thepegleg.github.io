<!DOCTYPE html>
<html>
<head>
    <title>Welcome to Atlas</title>
    <style>
        body {
            color: white;
            background-color: #000000;
            text-align: center;
            font-family: "Rye", serif;
            font-weight: 400;
            font-style: normal;
        }
        
        a {
            color: white;
            text-decoration: none;
        }
        
        #directory {
            color: white;
            margin: 0 auto;
            padding: 20px;
            max-width: 800px;
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rye&display=swap" rel="stylesheet">
</head>
<body>
    <div id="directory">
        <h1>Welcome to Atlas</h1>
        <h2><a href="index.html">Home</a></h2>
        <h2>Welcome to Atlas. Credit to whoever made these, and 3kh0 who ripped most of them</h2>
        <h1>Games</h1>
        <ul id="gamesList">
            <a href="eagler/">other eaglercraft</a><br>
            <a href="snailbob/">Snail Bob</a><br>
            <a href="snailbob/2/">snail bob 2</a><br>
            <a href="snailbob/3/">snail bob 3</a><br>
            <a href="snailbob/4/">snail bob 4</a><br>
            <a href="snailbob/5/">snail bob 5</a><br>
            <a href="snailbob/6/">snail bob 6</a><br>
            <a href="snailbob/7/">snail bob 7</a><br>
            <a href="snailbob/8/">snail bob 8</a><br>
        </ul>
        <h1>Not-Games</h1>
        <ul>
            <a href="92vids/">92vids</a><br>
            <a href="flashplayer.html">Flash Player</a><br>
            <a href="turbowarp.html">TurboWarp Packager</a><br>
            <a href="thehold/">The Hold - Crew Only</a><br>
        </ul>
    </div>

<script>
// Function to sort links alphabetically
function sortLinksAlphabetically(links) {
    return links.sort((a, b) => a.textContent.localeCompare(b.textContent));
}

// Function to remove duplicates from an array of links
function removeDuplicates(links) {
    const uniqueLinks = [];
    const linkMap = new Map();

    links.forEach(link => {
        if (!linkMap.has(link.href)) {
            linkMap.set(link.href, true);
            uniqueLinks.push(link);
        }
    });

    return uniqueLinks;
}

// GitHub API endpoint for retrieving repository contents
const repoUrls = [
    'https://api.github.com/repos/WhoIsEv/relivedassets/contents',
    'https://api.github.com/repos/sebastian-92/game-assets/contents'
];

// Fetch repository contents using GitHub API for each URL
repoUrls.forEach(repoUrl => {
    fetch(repoUrl)
        .then(response => response.json())
        .then(data => {
            // Filter out folders from the response
            const folders = data.filter(item => item.type === 'dir');

            // Retrieve existing links
            const existingLinks = Array.from(document.querySelectorAll('#gamesList a'));
            
            // Create new links for the fetched folders
            const newLinks = folders.map(folder => {
                const link = document.createElement('a');
                if (repoUrl.includes('WhoIsEv')) {
                    link.href = `https://rawcdn.githack.com/WhoIsEv/relivedassets/44f39fe159e6a10993104f9779b93bf51c8f30a7/${folder.path}/index.html`;
                } else {
                    link.href = `https://raw.githack.com/sebastian-92/game-assets/fixy/${folder.path}/index.html`;
                }
                link.textContent = folder.name.replace(/-/g, " ");
                return link;
            });
            
            // Combine existing and new links, remove duplicates, and sort alphabetically
            const allLinks = sortLinksAlphabetically(removeDuplicates(existingLinks.concat(newLinks)));

            // Clear existing list
            const gamesList = document.getElementById('gamesList');
            gamesList.innerHTML = '';

            // Append sorted links back to the list
            allLinks.forEach(link => {
                gamesList.appendChild(link);
                // Add line break after each link
                gamesList.appendChild(document.createElement('br'));
            });
        })
        .catch(error => console.error('Error fetching data:', error));
});
</script>
</body>
</html>
